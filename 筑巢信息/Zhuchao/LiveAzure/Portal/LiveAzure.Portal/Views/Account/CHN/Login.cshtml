<div class="login_frame">
    <div class="register_title">
        <b>如果您已是本站会员请登陆</b>
    </div>
    @using (Ajax.BeginForm("LoginUser", new AjaxOptions { OnSuccess = "LoginSuccess(data)", OnFailure = "LoginFailure", OnBegin = "LoginBegin" }))
    {
        <div class="login_register_table">
            <div class="login_table_tr">
                <span>
                    @LiveAzure.Resource.Model.Member.MemberUser.LoginName
                </span>
                @Html.TextBox("loginName")
            </div>
            <div class="login_table_tr">
                <label id="UName_Required" style="display:none;color:Red;"><span></span>请输入合法的用户名</label>
            </div>
            <div class="login_table_tr">
                <span>
                    @LiveAzure.Resource.Model.Member.MemberUser.Passcode
                </span>
                @Html.Password("password")
            </div>
            <div class="login_table_tr">
                <span></span>
                @Html.CheckBox("rememberUserName")记住用户名
                @Html.CheckBox("autoLogin")自动登录
            </div>
            <div class="login_table_tr">   
                <span></span>
                <input type="submit" id="btnLogin" value="登陆" />
            </div>
        </div>
     }
    <div class="login_bottom">
        有任何问题请点击&nbsp<a>帮助中心</a>&nbsp或&nbsp<a>在线客服</a>
    </div>
</div>
    <!--登陆模块-->
<script type="text/javascript">
    var loginName = $("#loginName");
    loginName.blur(function () {
        if (loginName.val() == "" || loginName.val().length > 128) $("#UName_Required").css("display", "block");
        else {
            $("#UName_Required").css("display", "none");
            $.ajax({
                type: "post",
                url: "/Account/CheckUserExist",
                data: { loginName: loginName.val() },
                success: function (result) {
                    if (!result) {
                        alert("用户名不存在");
                    }
                }
            });
        }
    });

    function LoginBegin() {
        if (loginName.val() == null) {
            alert("请确认用户名是否正确");
            return false;
        }
        var passcode = $("#password")
        if (passcode.val() == "" || passcode.val().length > 128) {
            alert("请输入正确的密码");
            return false;
        }
    }

    function LoginSuccess(result) {
        switch (result) {
            case 0:
                alert("登陆成功");
                document.location.replace("/Home/index");
                break;
            case 1: alert("用户名不能为空"); break;
            case 2: alert("请输入密码"); break;
            case 3: alert("用户被移除或更改"); break;
            case 4: alert("密码不正确"); break;
            default: alert("服务器繁忙，请稍后再试"); break;
        }
    }

    function LoginFailure() {
        alert("网络错误");
    }
//    btnLogin.click(function () {
//        if (loginName.val() == null || !checkLogin) {
//            alert("请确认用户名是否正确");
//            return false;
//        }
//        else if (passcode.val() == "" || passcode.val().length > 128) {
//            alert("请输入正确的密码");
//            return false;
//        }
//        else {
//            autoLogin = $("#AutoLogin").attr("checked") ? true : false; 
//            $.ajax({
//                type: "post",
//                url: "/Account/LoginUser",
//                data: { passcode: passcode.val(), loginName: loginName.val(),autoLogin: autoLogin},
//                success: function (result) {
//                    switch (result) {
//                        case 0:
//                            alert("登陆成功");
//                            document.location.replace("/Home/index");
//                            break;
//                        case 1: alert("用户名不能为空"); break;
//                        case 2: alert("请输入密码"); break;
//                        case 3: alert("用户被移除或更改"); break;
//                        case 4: alert("密码不正确"); break;
//                        default: alert("服务器繁忙，请稍后再试"); break;
//                    }
//                }
//            });
//        }
//    });
</script>