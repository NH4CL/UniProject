@{
    Layout = null;
}
@model LiveAzure.Models.General.GeneralProgNode
<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>
<script type="text/javascript">
    /*-----------------------
    更新grid
    ------------------------*/
    function triggerUpdate() {
        $("#NodeGrid").trigger('reloadGrid');
    }
//-->
</script>
@using (Ajax.BeginForm("NodeEditSave", "Program", new AjaxOptions { OnSuccess = "triggerUpdate();ClosePanel()" }, new { id = "programItemForm" }))
{
    <div class="down_AddorEdit">
    <table>
        <tr>
            @Html.HiddenFor(model => model.Gid)
            <th>
                @LiveAzure.Resource.Model.General.GeneralProgNode.Code
            </th>
            <td>
                @Html.EditorFor(model => model.Code)
                @Html.ValidationMessageFor(model => model.Code)
            </td>
        </tr>
        <tr>
            <th>
                <div class="AddorEditNameTitle">
                    @LiveAzure.Resource.Model.General.GeneralProgNode.Name
                </div>
            </th>
            <td>
                <div class="AddorEditNameMain">
                    @Html.EditorFor(model => model.Name, "Matter")
                </div>
            </td>
        </tr>
        <tr>
            <th>
                @LiveAzure.Resource.Model.General.GeneralProgNode.InputMode
            </th>
            <td>
                @Html.DropDownListFor(model => model.InputMode, ViewBag.InputModeList as IEnumerable<SelectListItem>, new { onchange = "selectOption()" })
            </td>
        </tr>
    </table>
    <div id="content" style="visibility:hidden">
        @LiveAzure.Resource.Model.General.GeneralProgNode.Optional
        @Html.EditorFor(model => model.Optional, "Matter")
    </div>
    <div>
        <input type="submit" value="@LiveAzure.Resource.Common.Submit" />
    </div>
    </div>    
}
<div id="test">
</div>
<script type="text/javascript">
<!--
    var mode = $("#InputMode").val();
    if (mode == 1) {
        document.getElementById("content").style.visibility = "visible";
        $("#content").fadeIn("fast");
    }
    /*-----------------------
    是否显示optional
    ------------------------*/
    function selectOption() {
        var mode = $("#InputMode").val();
        if (mode == 1) {
            document.getElementById("content").style.visibility = "visible";
            $("#content").fadeIn("fast");
        } else {
            document.getElementById("content").style.visibility = "hidden";
            $("#content").fadeOut("fast");
        }
    }
//-->
</script>
