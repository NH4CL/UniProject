@{
    Layout = null;
}
@model LiveAzure.Models.General.GeneralProgram
<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>
<script type="text/javascript">
<!--
    /*-----------------------
    重定向到编辑页面
    ------------------------*/
    function redirectEdit() {       
        $.ajax({
            type: "POST",
            url: "/Program/ProgramEdit",
            success: function (html) {
                $("#progEdit").html(html);
            }
        });
    }
    /*-----------------------
    关闭编辑页面
    ------------------------*/
    function closeEdit() {
        $.ajax({
            type: "POST",
            url: "/Program/Tree",
            success: function (html) {
                $("#progMain").html(html);
            }
        });
    }
//-->
</script>
<div style="margin: 2px;">
    @using (@Ajax.BeginForm("ProgramNewSave", "Program", new { parentId = Model.aParent }, new AjaxOptions { UpdateTargetId = "progMain", OnSuccess = "redirectEdit();ClosePanel()" }, new { id = "addProgramNode" }))
    {
    <div class="down_AddorEdit">
        <table>
            <tr>
                <th>
                    @LiveAzure.Resource.Model.General.GeneralProgram.Parent
                </th>
                <td>
                    @if (Model.Parent != null)
                    {
                        @ViewBag.ParentName
                    }
                </td>
            </tr>
            <tr>
                <th>
                    @LiveAzure.Resource.Model.General.GeneralProgram.Code
                </th>
                <td>
                    @Html.EditorFor(model => model.Code)
                    @Html.ValidationMessageFor(model => model.Code)
                </td>
            </tr>
            <tr>
                <th>
                    @LiveAzure.Resource.Model.General.GeneralProgram.Name
                </th>
                <td>
                    @Html.EditorFor(model => model.Name, "Matter")
                </td>
            </tr>
            <tr>
                <th>
                    @LiveAzure.Resource.Model.General.GeneralProgram.ProgUrl
                </th>
                <td>
                    @Html.EditorFor(model => model.ProgUrl)
                    @Html.ValidationMessageFor(model => model.ProgUrl)
                </td>
            </tr>
            <tr>
                <th>
                    @LiveAzure.Resource.Model.General.GeneralProgram.Sorting
                </th>
                <td>
                    @Html.EditorFor(model => model.Sorting)
                    @Html.ValidationMessageFor(model => model.Sorting)
                </td>
            </tr>
            <tr>
                <th>
                    @LiveAzure.Resource.Model.General.GeneralProgram.Terminal
                </th>
                <td>
                    @Html.DropDownListFor(model => model.Terminal, ViewBag.TerminalList as IEnumerable<SelectListItem>)
                </td>
            </tr>
            <tr>
                <th>
                    @LiveAzure.Resource.Model.General.GeneralProgram.Show
                </th>
                <td>
                    @Html.DropDownListFor(model => model.Show, ViewBag.ShowList as IEnumerable<SelectListItem>)
                </td>
            </tr>
            <tr>
                <td>
                    <input type="submit" value="@LiveAzure.Resource.Common.Submit" />                    
                </td>
                <td>   
                    <input type="reset" value="@LiveAzure.Resource.Common.Reset" />
                </td>
            </tr>
        </table>     
    </div>    
    }
</div>
