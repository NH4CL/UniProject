@{
    Layout = null;
    }
@using LiveAzure.Models.Member;
@model MemberRole
@*@using LiveAzure.Controls.LiveResourceEditor
@Html.LiveResourceEditorManager()*@
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
<script type="text/javascript">
    function ConfirmCode(data) {
        if (data == "Code Error")
            alert("@LiveAzure.Resource.Stage.UserController.CodeRepetitive");
        else {
            alert("@LiveAzure.Resource.Common.SaveSuccess");
            window.location.href = "/User/MemberRole";
        }
    }
</script>
<div id="RoleAddMain">
    @using (@Ajax.BeginForm("AddRole", "User", new AjaxOptions { HttpMethod = "Post", OnSuccess = "ConfirmCode" }, new { parentId = Model.aParent }))
    {
        @Html.ValidationSummary(true)
        
        <h2>@LiveAzure.Resource.Stage.UserController.addRole</h2>
        <div style="margin: 2px;">
            <table>
                <tr>
                    <td>@LiveAzure.Resource.Model.Member.MemberRole.Parent
                    </td>
                    @if (Model.Parent != null)
                    {
                        <td>@Html.HiddenFor(model => model.aParent)
                            @Html.LabelForModel(Model.Parent.Code)
                        </td>
                    }
                    else
                    {
                        <td>@Html.LabelForModel("")
                        </td>
                    }
                </tr>
                <tr>
                    <td>@LiveAzure.Resource.Model.Member.MemberRole.Code 
                    </td>
                    <td>@Html.EditorFor(model => model.Code)
                    @Html.ValidationMessageFor(model => model.Code)
                    </td>
                </tr>
                <tr>
                    <td>@LiveAzure.Resource.Model.Member.MemberRole.Name
                    </td>
                    <td>@Html.HiddenFor(model => model.aName)
                    @Html.EditorFor(model => model.Name,"Matter")
                    @Html.ValidationMessageFor(model => model.Name.Matter)
                    </td>
                </tr>
                <tr>
                    <td>@LiveAzure.Resource.Model.Member.MemberRole.Rtype
                    </td>
                    <td>@Html.HiddenFor(model => model.RoleType)
                    @Html.DropDownListFor(model => model.Rtype, (List<SelectListItem>)ViewBag.olist, @LiveAzure.Resource.Common.ChooseType)
                    @Html.ValidationMessageFor(model => model.Rtype)
                    </td>
                </tr>
                <tr>
                    <td>@LiveAzure.Resource.Model.General.GeneralRegion.Remark
                    </td>
                    <td>@Html.TextAreaFor(model => model.Remark)
                    @Html.ValidationMessageFor(model => model.Remark)
                    </td>
                </tr>
                <tr>
                    <td>
                        <input type="submit" value="@LiveAzure.Resource.Common.Submit"  />
                    </td>
                    <td>
                        <input type="reset" value="@LiveAzure.Resource.Common.Reset" />
                    </td>
                </tr>
            </table>
        </div>
    
    }
</div>
